{
  "exercise_id": "MM-01",
  "reference_solution": {
    "variables": {
      "definition": "x_i = toneladas de materia prima i a utilizar",
      "indices": {
        "x1": "Hierro 1",
        "x2": "Hierro 2",
        "x3": "Hierro 3",
        "x4": "Cobre 1",
        "x5": "Cobre 2",
        "x6": "Aluminio 1",
        "x7": "Aluminio 2"
      },
      "domain": "continuous",
      "count": 7
    },
    "objective_function": {
      "type": "min",
      "expression": "200x1 + 250x2 + 150x3 + 220x4 + 240x5 + 200x6 + 165x7",
      "coefficients": [
        200,
        250,
        150,
        220,
        240,
        200,
        165
      ]
    },
    "constraints": {
      "demand": {
        "expression": "x1 + x2 + x3 + x4 + x5 + x6 + x7 = 500",
        "sense": "eq",
        "rhs": 500
      },
      "carbon_min": {
        "expression": "0.025x1 + 0.03x2 >= 10",
        "sense": "geq",
        "rhs": 10,
        "derivation": "0.02 * 500 = 10"
      },
      "carbon_max": {
        "expression": "0.025x1 + 0.03x2 <= 15",
        "sense": "leq",
        "rhs": 15,
        "derivation": "0.03 * 500 = 15"
      },
      "copper_min": {
        "expression": "0.003x3 + 0.90x4 + 0.96x5 + 0.004x6 + 0.006x7 >= 2",
        "sense": "geq",
        "rhs": 2,
        "derivation": "0.004 * 500 = 2"
      },
      "copper_max": {
        "expression": "0.003x3 + 0.90x4 + 0.96x5 + 0.004x6 + 0.006x7 <= 3",
        "sense": "leq",
        "rhs": 3,
        "derivation": "0.006 * 500 = 3"
      },
      "manganese_min": {
        "expression": "0.013x1 + 0.008x2 + 0.04x5 + 0.012x6 >= 6",
        "sense": "geq",
        "rhs": 6,
        "derivation": "0.012 * 500 = 6"
      },
      "manganese_max": {
        "expression": "0.013x1 + 0.008x2 + 0.04x5 + 0.012x6 <= 8.25",
        "sense": "leq",
        "rhs": 8.25,
        "derivation": "0.0165 * 500 = 8.25"
      },
      "availability": [
        {
          "var": "x1",
          "sense": "leq",
          "rhs": 400
        },
        {
          "var": "x2",
          "sense": "leq",
          "rhs": 300
        },
        {
          "var": "x3",
          "sense": "leq",
          "rhs": 600
        },
        {
          "var": "x4",
          "sense": "leq",
          "rhs": 500
        },
        {
          "var": "x5",
          "sense": "leq",
          "rhs": 200
        },
        {
          "var": "x6",
          "sense": "leq",
          "rhs": 300
        },
        {
          "var": "x7",
          "sense": "leq",
          "rhs": 250
        }
      ]
    },
    "optimal_value_approx": 98121
  },
  "rubric": {
    "total_points": 100,
    "components": [
      {
        "id": "variables",
        "name": "Variables de decisión",
        "points": 20,
        "criteria": [
          "Una variable por materia prima",
          "Unidades especificadas (toneladas)",
          "Dominio continuo (no requiere enteras)"
        ]
      },
      {
        "id": "objective",
        "name": "Función objetivo",
        "points": 20,
        "criteria": [
          "Tipo minimización",
          "Coeficientes de costo correctos",
          "Incluye las 7 variables"
        ]
      },
      {
        "id": "demand_constraint",
        "name": "Restricción de demanda",
        "points": 15,
        "criteria": [
          "Igualdad (no desigualdad)",
          "RHS = 500",
          "Suma de todas las variables"
        ]
      },
      {
        "id": "composition_constraints",
        "name": "Restricciones de composición",
        "points": 30,
        "criteria": [
          "6 restricciones (min y max para 3 elementos)",
          "Porcentajes convertidos a decimales",
          "RHS calculado como porcentaje × 500",
          "Variables correctas en cada restricción"
        ]
      },
      {
        "id": "availability_constraints",
        "name": "Restricciones de disponibilidad",
        "points": 10,
        "criteria": [
          "7 restricciones de cota superior",
          "Sentido ≤ (no =)"
        ]
      },
      {
        "id": "non_negativity",
        "name": "No negatividad",
        "points": 5,
        "criteria": [
          "Declaración explícita x_i >= 0"
        ]
      }
    ]
  },
  "common_errors": [
    {
      "id": "percentage_not_decimal",
      "description": "Usar porcentajes sin convertir a decimales",
      "incorrect": "2.5x1 + 3x2 >= 2",
      "correct": "0.025x1 + 0.03x2 >= 10",
      "feedback": "Recuerda que 2.5% significa 2.5/100 = 0.025. ¿Cuántas toneladas de carbono hay en una tonelada de Hierro 1?"
    },
    {
      "id": "composition_as_equality",
      "description": "Formular composición como igualdad en vez de rango",
      "incorrect": "Carbono = 2.5%",
      "correct": "2% <= Carbono <= 3%",
      "feedback": "El enunciado dice entre 2% y 3%. ¿Eso significa exactamente un valor o un rango permitido?"
    },
    {
      "id": "rhs_not_proportional",
      "description": "No multiplicar el porcentaje requerido por la producción total",
      "incorrect": "0.025x1 + 0.03x2 >= 2",
      "correct": "0.025x1 + 0.03x2 >= 0.02 × 500 = 10",
      "feedback": "El 2% mínimo es sobre las 500 toneladas totales. ¿Cuántas toneladas de carbono representan el 2% de 500?"
    },
    {
      "id": "availability_as_equality",
      "description": "Usar = en vez de ≤ para disponibilidad",
      "incorrect": "x1 = 400",
      "correct": "x1 <= 400",
      "feedback": "¿La empresa DEBE usar toda la materia prima disponible, o simplemente no puede usar MÁS de lo que tiene?"
    },
    {
      "id": "missing_materials_in_constraint",
      "description": "No incluir todas las materias que aportan un elemento",
      "incorrect": "Cobre: 0.90x4 + 0.96x5 >= 2 (falta Hierro 3, Aluminio 1, Aluminio 2)",
      "correct": "0.003x3 + 0.90x4 + 0.96x5 + 0.004x6 + 0.006x7 >= 2",
      "feedback": "Revisa la tabla: ¿cuáles materias primas aportan cobre? No olvides las que tienen porcentajes pequeños."
    }
  ],
  "validation_tests": [
    {
      "test": "variable_count",
      "expected": 7
    },
    {
      "test": "constraint_count_min",
      "expected": 15,
      "breakdown": "1 demanda + 6 composición + 7 disponibilidad + 1 no negatividad"
    },
    {
      "test": "objective_type",
      "expected": "min"
    }
  ]
}